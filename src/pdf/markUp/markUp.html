<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <link rel="stylesheet" href="../styles.css">
  <link rel="stylesheet" href="markUp.css">
  <style>
    /* Additional styles can be added here if needed */
  </style>

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PDF Redline Editor</title>
  <meta name="description" content="Browser-based PDF markup editor (HTML + TypeScript-style JS + PDF.js + SVG overlay). Single-file demo." />
  <!-- Minimal, modern, utility-ish CSS (no framework) -->
</head>
<body data-page="pdf-markup">
<div class="app" aria-label="PDF Redline Editor">
  <header>
    <div class="toolbar" role="toolbar" aria-label="Main toolbar">
      <div class="group" role="group" aria-label="File">
        <input aria-label="Open PDF" type="file" id="openPDF" accept="application/pdf" />
        <button id="saveJSON" title="Save Project (JSON)">Save</button>
        <button id="loadJSON" title="Load Project (JSON)">Load</button>
        <button id="exportPNG" title="Export PNG/JPEG">Export PNG/JPEG</button>
        <button id="exportPDF" title="Export Flattened PDF">Export PDF</button>
        <button id="exportAnn" title="Export Annotation-only PDF">Export Ann.</button>
      </div>
      <div class="group" role="group" aria-label="Navigation">
        <button id="prevPage" title="Previous Page (PgUp)">‚óÄ</button>
        <div id="pageInfo" aria-live="polite">‚Äì / ‚Äì</div>
        <button id="nextPage" title="Next Page (PgDn)">‚ñ∂</button>
        <div class="sep"></div>
        <button id="zoomOut" title="Zoom Out (Ctrl/Cmd -)">-</button>
        <span id="zoomPct" class="badge" aria-live="polite">100%</span>
        <button id="zoomIn" title="Zoom In (Ctrl/Cmd +)">+</button>
        <button id="fitW" title="Fit Width">Fit W</button>
        <button id="fitP" title="Fit Page">Fit P</button>
      </div>
      <div class="group" role="group" aria-label="Tools">
        <button data-tool="select" title="V ‚Äî Select">üñ±Ô∏è</button>
        <button data-tool="text" title="T ‚Äî Text">T</button>
        <button data-tool="highlighter" title="H ‚Äî Highlighter">üñçÔ∏è</button>
        <button data-tool="pen" title="P ‚Äî Pen">‚úíÔ∏è</button>
        <button data-tool="line" title="L ‚Äî Line">Ôºè</button>
        <button data-tool="arrow" title="A ‚Äî Arrow">‚û§</button>
        <button data-tool="rect" title="R ‚Äî Rectangle">‚ñ≠</button>
        <button data-tool="ellipse" title="O ‚Äî Ellipse">‚óØ</button>
        <button data-tool="callout" title="C ‚Äî Callout">üí¨</button>
        <button data-tool="image" title="G ‚Äî Image">üñºÔ∏è</button>
        <button data-tool="table" title="Table">#Ô∏è‚É£</button>
        <button data-tool="eraser" title="Eraser">ü©π</button>
        <button data-tool="note" title="Sticky Note">üóíÔ∏è</button>
        <div class="sep"></div>
        <button id="stampBtn" title="Stamps">Stamp</button>
      </div>
      <div class="group" role="group" aria-label="Edit">
        <button id="undo" title="Undo (Ctrl/Cmd+Z)">‚Ü∂</button>
        <button id="redo" title="Redo (Ctrl/Cmd+Y)">‚Ü∑</button>
        <button id="del" title="Delete (Del)">Del</button>
        <button id="dup" title="Alt-drag or Duplicate">‚éò</button>
        <button id="group" title="Group">Group</button>
        <button id="ungroup" title="Ungroup">Ungroup</button>
        <div class="sep"></div>
        <button id="alignL">‚Øá</button><button id="alignC">‚Øà‚Øá</button><button id="alignR">‚Øà</button>
        <button id="alignT">‚ØÖ</button><button id="alignM">‚ØÜ‚ØÖ</button><button id="alignB">‚ØÜ</button>
        <button id="distH" title="Distribute H">‚áî</button>
        <button id="distV" title="Distribute V">‚áï</button>
      </div>
      <div class="group" role="group" aria-label="Text & Number formatting">
        <label>Font
          <select id="fontFamily" aria-label="Font family">
            <option>Inter</option>
            <option>Arial</option>
            <option>Times New Roman</option>
            <option>Courier New</option>
          </select>
        </label>
        <label>Size <input id="fontSize" type="number" value="14" min="6" max="96" style="width:72px"/></label>
        <button id="bold" title="Ctrl/Cmd+B">B</button>
        <button id="italic" title="Ctrl/Cmd+I"><i>I</i></button>
        <button id="underline" title="Ctrl/Cmd+U"><u>U</u></button>
        <button id="strike" title="Strikethrough"><s>S</s></button>
        <label>Color <input id="textColor" type="color" value="#e11d48"/></label>
        <label>Fill <input id="textBg" type="color" value="#000000"/></label>
        <button id="numPalette" title="Number redline palette">123‚áÑ</button>
      </div>
    </div>
  </header>

  <div class="main" role="main">
    <aside class="side" aria-label="Sidebar">
      <div class="tabs" role="tablist">
        <div class="tab active" role="tab" aria-selected="true" data-tab="thumbs">Thumbnails</div>
        <div class="tab" role="tab" aria-selected="false" data-tab="layers">Layers</div>
        <div class="tab" role="tab" aria-selected="false" data-tab="comments">Comments</div>
      </div>
      <div class="thumbs" id="thumbs" role="tabpanel" aria-label="Page Thumbnails"></div>
      <div class="layers" id="layers" role="tabpanel" aria-label="Layers" hidden></div>
      <div class="comments" id="comments" role="tabpanel" aria-label="Comments" hidden></div>
    </aside>

    <section class="viewport-wrap" aria-label="Document viewport">
      <div class="rulers" aria-hidden="true">
        <div class="ruler-h" id="rulerH"></div>
        <div class="ruler-v" id="rulerV"></div>
      </div>
      <div class="viewport" id="viewport" tabindex="0" aria-label="Pages container"></div>
    </section>

    <aside class="props" aria-label="Style & Properties Panel">
      <div class="section">
        <h3>Styles</h3>
        <div class="row">
          <label>Stroke <input id="strokeColor" type="color" value="#e11d48"/></label>
          <label>Fill <input id="fillColor" type="color" value="#000000"/></label>
        </div>
        <div class="row">
          <label>Width <input id="strokeWidth" type="number" min="0" value="2" style="width:80px"/></label>
          <label>Opacity <input id="opacity" type="range" min="0" max="1" step="0.05" value="1"/></label>
        </div>
        <div class="row">
          <label>Dash <select id="dash">
            <option value="">Solid</option>
            <option value="4,4">4-4</option>
            <option value="8,4">8-4</option>
            <option value="12,6">12-6</option>
          </select></label>
          <label>Arrow <select id="arrow">
            <option value="none">None</option>
            <option value="end">End ‚ñ∂</option>
            <option value="start">‚óÄ Start</option>
            <option value="both">‚óÄ‚ñ∂ Both</option>
          </select></label>
          <label><input id="shadow" type="checkbox"/> Shadow</label>
        </div>
        <div class="row">
          <button id="addPreset">+ Preset</button>
          <select id="presets"><option>Preset styles‚Ä¶</option></select>
        </div>
      </div>
      <div class="section">
        <h3>Object</h3>
        <div class="row">
          <button id="lock">Lock</button>
          <button id="hide">Hide</button>
          <button id="bringFront">Front</button>
          <button id="sendBack">Back</button>
        </div>
        <div class="row">
          <label><input id="snapGrid" type="checkbox" checked /> Snap to grid/guides</label>
        </div>
      </div>
      <div class="section">
        <h3>Export</h3>
        <div class="row">
          <label>Range <input id="exportRange" value="1-1" style="width:100px"/></label>
          <select id="exportFmt">
            <option value="png">PNG</option>
            <option value="jpeg">JPEG</option>
          </select>
        </div>
      </div>
    </aside>
  </div>

  <footer class="status" role="status" aria-live="polite">
    <span id="statusTool" class="badge">Select</span>
    <span id="statusHint">Space: pan ‚Ä¢ Shift: constrain ‚Ä¢ Alt: duplicate</span>
    <span id="statusCoord">x:‚Äì y:‚Äì</span>
    <span id="statusZoom">zoom: 100%</span>
  </footer>
</div>

<div id="context" class="context" role="menu" aria-label="Context menu"></div>
<div id="tooltip" class="tooltip" hidden></div>

<!-- PDF.js & pdf-lib via CDN (no UI frameworks) -->
<script src="https://unpkg.com/pdfjs-dist@4.7.76/build/pdf.min.js"></script>
<script>
  // Point the worker to the same CDN version
  if (window['pdfjsLib']) {
    pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://unpkg.com/pdfjs-dist@4.7.76/build/pdf.worker.min.js';
  }
</script>
<script src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>

  <script src="markUp.js" type="module"></script>
</body>
</html>
