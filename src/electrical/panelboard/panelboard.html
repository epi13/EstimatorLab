<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <link rel="stylesheet" href="../styles.css">
  <link rel="stylesheet" href="panelboard.css">
  <style>
    /* Additional styles can be added here if needed */
  </style>

  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Electrical Panelboard Price Calculator</title>
</head>
<body data-page="electrical-panelboard">
  <header>
    <h1>Electrical Panelboard Price Calculator</h1>
    <small>Alaska-ready • Includes materials, shipping/handling, and labor • Configurable pricing engine</small>
  </header>

  <div class="wrap">
    <section class="card" id="inputs">
      <h2>Panel Inputs</h2>
      <div class="grid-2">
        <div>
          <label>Panel Type</label>
          <select id="panelType">
            <option value="Lighting">Lighting/Branch Panelboard</option>
            <option value="Distribution">Distribution Panelboard</option>
          </select>
        </div>
        <div>
          <label>Configuration</label>
          <select id="mainType">
            <option value="ML">Main Lugs Only (MLO)</option>
            <option value="MB">Main Breaker (MB)</option>
          </select>
        </div>
        <div>
          <label>Amperage Rating</label>
          <select id="amps">
            <option>100</option>
            <option selected>225</option>
            <option>400</option>
            <option>600</option>
          </select>
        </div>
        <div>
          <label>Voltage</label>
          <select id="voltage">
            <option>120/240V 1Ø</option>
            <option selected>120/208V 3Ø</option>
            <option>277/480V 3Ø</option>
            <option>240/415V 3Ø</option>
          </select>
        </div>
        <div>
          <label>Phase</label>
          <select id="phase">
            <option>1</option>
            <option selected>3</option>
          </select>
        </div>
        <div>
          <label>Spaces / Circuits</label>
          <input id="spaces" type="number" min="6" step="2" value="42">
        </div>
        <div>
          <label>Bus Material</label>
          <select id="bus">
            <option selected>Aluminum</option>
            <option>Copper</option>
          </select>
        </div>
        <div>
          <label>Short-Circuit Rating (kAIC)</label>
          <select id="kaic">
            <option>22</option>
            <option selected>42</option>
            <option>65</option>
            <option>100</option>
          </select>
        </div>
        <div>
          <label>Enclosure NEMA</label>
          <select id="nema">
            <option selected>NEMA 1 (indoor)</option>
            <option>NEMA 3R (weatherproof)</option>
            <option>NEMA 4X (corrosion resistant)</option>
          </select>
        </div>
        <div>
          <label>Brand/Spec Multiplier</label>
          <input id="brandMult" type="number" step="0.01" value="1.00">
          <div class="muted">Use to match preferred manufacturer/spec language.</div>
        </div>
      </div>

      <div class="hr"></div>
      <h2>Accessories</h2>
      <div class="grid-2">
        <label class="flex"><input id="acc_ground" type="checkbox"> Ground bar kit</label>
        <label class="flex"><input id="acc_spd" type="checkbox"> SPD/TVSS</label>
        <label class="flex"><input id="acc_feedthru" type="checkbox"> Feed‑through lugs</label>
        <label class="flex"><input id="acc_subfeed" type="checkbox"> Sub‑feed breaker(s)</label>
        <label class="flex"><input id="acc_nameplates" type="checkbox"> Engraved nameplates</label>
        <label class="flex"><input id="acc_keyinterlock" type="checkbox"> Key interlock</label>
      </div>

      <div class="hr"></div>
      <h2>Logistics & Labor</h2>
      <div class="grid-2">
        <div>
          <label>Site Logistics</label>
          <select id="shipMode">
            <option selected>Road System</option>
            <option>Barge / Marine</option>
            <option>Bush Air</option>
          </select>
        </div>
        <div>
          <label>Approx. Haul Distance (miles)</label>
          <input id="miles" type="number" min="0" value="50">
        </div>
        <div>
          <label>Remote Factor (productivity)</label>
          <input id="remoteFactor" type="number" step="0.01" value="1.15">
          <div class="muted">&gt;1.00 increases man‑hours for remote/occupied/winter conditions.</div>
        </div>
        <div>
          <label>Handling %</label>
          <input id="handlingPct" type="number" step="0.01" value="0.05">
        </div>
        <div>
          <label>Electrical Labor Rate ($/hr)</label>
          <input id="laborRate" type="number" step="1" value="96">
          <div class="muted">Anchorage default. Adjust if needed.</div>
        </div>
      </div>

      <div class="hr"></div>
      <div class="row">
        <button class="btn" id="calcBtn">Calculate Price</button>
        <button class="btn" id="resetBtn">Reset</button>
        <span class="pill">Configurable Pricing Engine</span>
      </div>

      <details>
        <summary><strong>Pricing Config</strong> (advanced)</summary>
        <div class="muted" style="margin:8px 0">Edit and save to tweak base pricing without changing code. Values are rough industry ROMs; replace with your vendor data.</div>
        <textarea id="configArea" rows="18" spellcheck="false"></textarea>
        <div class="row" style="margin-top:8px">
          <button class="btn" id="loadCfg">Load from editor</button>
          <button class="btn" id="exportCfg">Download config.json</button>
          <input type="file" id="importCfgFile" accept="application/json"/>
          <button class="btn" id="importCfg">Import</button>
        </div>
      </details>

      <details>
        <summary><strong>Self‑Tests</strong> (sanity checks)</summary>
        <div class="row" style="margin:8px 0">
          <button class="btn" id="runTests">Run Tests</button>
          <span id="testSummary" class="badge"></span>
        </div>
        <table>
          <thead><tr><th>#</th><th>Test</th><th>Result</th><th>Message</th></tr></thead>
          <tbody id="testResults"></tbody>
        </table>
      </details>
    </section>

    <section class="card" id="outputs">
      <h2>Results</h2>
      <div id="itemName" class="tag">Item name will appear here once calculated…</div>
      <div class="hr"></div>
      <table id="breakdown">
        <thead>
          <tr>
            <th>Component</th>
            <th>Basis</th>
            <th class="right">Cost ($)</th>
          </tr>
        </thead>
        <tbody></tbody>
        <tfoot>
          <tr><td colspan="2">Materials Subtotal</td><td class="right" id="matSubtotal">$0</td></tr>
          <tr><td colspan="2">Shipping</td><td class="right" id="shipping">$0</td></tr>
          <tr><td colspan="2">Handling</td><td class="right" id="handling">$0</td></tr>
          <tr><td colspan="2">Labor</td><td class="right" id="labor">$0</td></tr>
          <tr><td colspan="2">Estimated Total</td><td class="right" id="grandTotal">$0</td></tr>
        </tfoot>
      </table>

      <details style="margin-top:10px">
        <summary><strong>Assumptions & Notes</strong></summary>
        <ul id="assumptions" class="muted"></ul>
      </details>
    </section>
  </div>

<script src="panelboard.js"></script>
</body>
</html>
