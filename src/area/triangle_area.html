<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Triangle Area Calculator</title>
  <style>
    body { font-family: sans-serif; max-width: 800px; margin: auto; padding: 20px; }
    label { display: block; margin-top: 10px; }
    input, select { width: 100%; padding: 5px; margin-top: 5px; }
    .section { display: none; margin-top: 20px; }
    .visible { display: block; }
    svg { margin-top: 10px; max-width: 100%; height: auto; }
    .output { margin-top: 20px; font-size: 1.2em; }
    .history { margin-top: 20px; font-size: 0.9em; background: #f9f9f9; padding: 10px; border: 1px solid #ccc; }
  </style>
</head>
<body>
  <h2>Triangle Area Calculator</h2>

  <label for="method">Choose method:</label>
  <select id="method" onchange="switchMethod()">
    <option value="baseHeight">Base & Height</option>
    <option value="heron">Three Sides (Heron)</option>
    <option value="sas">Two Sides & Included Angle</option>
    <option value="coordinates">Coordinates</option>
  </select>

  <div>
    <label>Units:
      <select id="units" onchange="calculate()">
        <option value="m²">m²</option>
        <option value="cm²">cm²</option>
        <option value="in²">in²</option>
        <option value="ft²">ft²</option>
      </select>
    </label>
  </div>

  <!-- Sections -->
  <div id="baseHeight" class="section visible">
    <label>Base: <input type="number" id="base" step="any" oninput="calculate()"></label>
    <label>Height: <input type="number" id="height" step="any" oninput="calculate()"></label>
    <svg><line x1="10" y1="80" x2="150" y2="80" stroke="black"/><line x1="10" y1="80" x2="10" y2="10" stroke="black"/></svg>
  </div>

  <div id="heron" class="section">
    <label>Side a: <input type="number" id="a" step="any" oninput="calculate()"></label>
    <label>Side b: <input type="number" id="b" step="any" oninput="calculate()"></label>
    <label>Side c: <input type="number" id="c" step="any" oninput="calculate()"></label>
    <svg><polygon points="50,10 10,90 90,90" stroke="black" fill="none"/></svg>
  </div>

  <div id="sas" class="section">
    <label>Side 1: <input type="number" id="side1" step="any" oninput="calculate()"></label>
    <label>Side 2: <input type="number" id="side2" step="any" oninput="calculate()"></label>
    <label>Included angle: <input type="number" id="angle" step="any" oninput="calculate()"></label>
    <label>Angle Unit:
      <select id="angleUnit" onchange="calculate()">
        <option value="deg">Degrees</option>
        <option value="rad">Radians</option>
      </select>
    </label>
    <svg><line x1="10" y1="90" x2="80" y2="10" stroke="black"/><line x1="10" y1="90" x2="150" y2="90" stroke="black"/></svg>
  </div>

  <div id="coordinates" class="section">
    <label>X1, Y1: <input type="number" id="x1" step="any" oninput="calculate()"> <input type="number" id="y1" step="any" oninput="calculate()"></label>
    <label>X2, Y2: <input type="number" id="x2" step="any" oninput="calculate()"> <input type="number" id="y2" step="any" oninput="calculate()"></label>
    <label>X3, Y3: <input type="number" id="x3" step="any" oninput="calculate()"> <input type="number" id="y3" step="any" oninput="calculate()"></label>
    <svg><polygon points="10,90 60,10 110,90" stroke="black" fill="none"/></svg>
  </div>

  <div class="output">
    <h3 id="result">Area: —</h3>
  </div>

  <div class="history" id="history">History:<br></div>

  <script>
    function switchMethod() {
      const methods = ["baseHeight", "heron", "sas", "coordinates"];
      const selected = document.getElementById("method").value;
      methods.forEach(id => document.getElementById(id).classList.remove("visible"));
      document.getElementById(selected).classList.add("visible");
      calculate();
    }

    function calculate() {
      const method = document.getElementById("method").value;
      const unit = document.getElementById("units").value;
      let area = 0;

      try {
        if (method === "baseHeight") {
          const b = parseFloat(document.getElementById("base").value);
          const h = parseFloat(document.getElementById("height").value);
          area = 0.5 * b * h;
        } else if (method === "heron") {
          const a = parseFloat(document.getElementById("a").value);
          const b = parseFloat(document.getElementById("b").value);
          const c = parseFloat(document.getElementById("c").value);
          const s = (a + b + c) / 2;
          area = Math.sqrt(s * (s - a) * (s - b) * (s - c));
        } else if (method === "sas") {
          const s1 = parseFloat(document.getElementById("side1").value);
          const s2 = parseFloat(document.getElementById("side2").value);
          const angle = parseFloat(document.getElementById("angle").value);
          const unitType = document.getElementById("angleUnit").value;
          const theta = unitType === "deg" ? angle * Math.PI / 180 : angle;
          area = 0.5 * s1 * s2 * Math.sin(theta);
        } else if (method === "coordinates") {
          const x1 = parseFloat(document.getElementById("x1").value);
          const y1 = parseFloat(document.getElementById("y1").value);
          const x2 = parseFloat(document.getElementById("x2").value);
          const y2 = parseFloat(document.getElementById("y2").value);
          const x3 = parseFloat(document.getElementById("x3").value);
          const y3 = parseFloat(document.getElementById("y3").value);
          area = Math.abs((x1*(y2-y3) + x2*(y3-y1) + x3*(y1-y2)) / 2);
        }

        if (isNaN(area) || area <= 0) throw "Invalid input";
        document.getElementById("result").innerText = `Area: ${area.toFixed(2)} ${unit}`;
        addToHistory(area.toFixed(2), unit);
      } catch (e) {
        document.getElementById("result").innerText = "Area: Invalid input";
      }
    }

    function addToHistory(area, unit) {
      const line = document.createElement("div");
      line.innerText = `→ ${area} ${unit}`;
      document.getElementById("history").appendChild(line);
    }
  </script>
</body>
</html>